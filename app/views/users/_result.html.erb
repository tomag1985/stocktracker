<div class="results-block">
  <%= render 'layouts/messages' %>
</div>

<% if @stock %>
  <div class="card card-header results-block">
    <strong>Symbol: </strong> <%= @stock.ticker %>
    <strong>Name: </strong> <%= @stock.name %>
    <strong>Last price: </strong> $<%= @stock.last_price %>

    <% if current_user.stocks.exists?(ticker: @stock.ticker) %>
      <%= form_for @stock, :url => url_for(:controller => 'user_stocks', :action => 'destroy') do |f| %>
        <%= f.hidden_field :ticker, value: @stock.ticker %>
        <%= f.hidden_field :name, value: @stock.name %>
        <%= f.hidden_field :last_price, value: @stock.last_price %>
        <%= button_tag type: :destroy, class: "btn btn-danger" do %>
          <%= fa_icon 'trash' %>
        <% end %>
      <% end %>

    <% else %>
      <%= form_for @stock, :url => url_for(:controller => 'user_stocks', :action => 'create') do |f| %>
        <%= f.hidden_field :ticker, value: @stock.ticker %>
        <%= f.hidden_field :name, value: @stock.name %>
        <%= f.hidden_field :last_price, value: @stock.last_price %>
        <%= button_tag type: :submit, class: "btn btn-success" do %>
          <%= fa_icon 'star' %>
        <% end %>
      <% end %>

    <% end %>

  </div>
<% end %>
